define(["react","widgets/SelectableGroup","widgets/SelectableItem"],function(e,t,a){"use strict";var c=React.createClass({displayName:"LeftPanel",getInitialState:function(){return{selected:0,selectedTab:"statistics",selectedAccordian:0,cleared:!1}},handleChange:function(e){},loadSurvey:function(){var e="http://opendataenterprise.org/map/survey";window.open(e,"_blank")},selectAccordian:function(e){var t=this.props.keys.accordian.items,a=t[e].selected?e:-1;this.setState({selectedAccordian:a})},switchTabs:function(e){this.setState({selectedTab:e.value})},selectFilter:function(e){var t=e.items.filter(function(e){return e.selected?!0:void 0});e.source.field&&this.props.keys.selectFilter(t,e.source.field)},componentWillReceiveProps:function(e){},renderAccordian:function(e,t){var c=e.items.map(function(e,c){var n=e.items.map(function(e,t){e.value+t.toString()+c.toString();return React.createElement(a,{key:t,keys:e})}),s=t.selectedAccordian===c?{}:{display:"none"};return e.selected=t.selectedAccordian===c,e.toggle=!0,React.createElement("div",{className:"br-accordian"},React.createElement(a,{key:c,keys:e}),React.createElement("div",{className:"accordian-content",style:s},n))});return c},clearFilters:function(){{var e=this.props.keys.accordian;e.items.map(function(e,t){e.items.map(function(e,t){e.selected=!1})})}this.props.keys.clearFilter(),this.forceUpdate(),this.props.keys.closePopups()},submitSearch:function(e){var t=document.getElementById("search-box").value;this.props.keys.setSearchFilter(t)},render:function(){var e=this.props.keys,a=(this.handleClick,this.state),c=(this.setState,this);e.accordian.items.forEach(function(e,t){e.changed=function(e){c.selectAccordian(t)},e.items.forEach(function(t){a.cleared&&(t.selected=!1),t.changed=function(t){c.selectFilter(e)}})});var n=this.renderAccordian(e.accordian,a),s=e.tabs.items[1].value==this.state.selectedTab?{}:{display:"none"},r=e.tabs.items[0].value==this.state.selectedTab?{}:{display:"none"};return e.tabs.changed=this.switchTabs,React.createElement("div",{className:"left-panel-container absolute no-right no-left no-top no-bottom"},React.createElement("div",{className:"selectable-group-container"},React.createElement(t,{keys:e.tabs}),React.createElement("div",{className:"tab-content"},React.createElement("div",{className:"input-container"},React.createElement("input",{id:"search-box",placeholder:"search for",onChange:_.debounce(this.submitSearch,500)})),React.createElement("div",{className:"accordian-container",style:s},n),React.createElement("div",{style:r},React.createElement("div",{id:e.statisticsDiv})),React.createElement("button",{className:"export-button",onClick:this.clearFilters},"Clear Filters"),React.createElement("button",{className:"export-button",onClick:e.exportTableData,id:"export-button"},"Export Table Data Excel"),React.createElement("button",{className:"export-button",onClick:e.exportTableDataJSON,id:"export-button-json"},"Export Table Data JSON"),React.createElement("button",{className:"export-button",onClick:e.exportMap,id:"export-map-button"},"Export Map"),React.createElement("button",{className:"export-button",onClick:this.loadSurvey,id:"survey-button"},"Take Survey"),React.createElement("div",{className:"license-holder"},React.createElement("span",null,"The Open Data Impact Map, a project of the Center for Open Data Enterprise as part of the OD4D network, is licensed under ",React.createElement("a",{href:"http://creativecommons.org/licenses/by-sa/4.0/"},"Creative Commons Attribution-ShareAlike 4.0 International License"))),React.createElement("div",{className:"creative-commons-logo"}))))}});return function(e,t){return React.render(React.createElement(c,{keys:e}),document.getElementById(t))}});