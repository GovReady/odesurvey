!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("React"),require("_")):"function"==typeof define&&define.amd?define(["React","_"],t):"object"==typeof exports?exports.Griddle=t(require("React"),require("_")):e.Griddle=t(e.React,e._)}(this,function(e,t){return function(e){function t(o){if(s[o])return s[o].exports;var n=s[o]={exports:{},id:o,loaded:!1};return e[o].call(n.exports,n,n.exports,t),n.loaded=!0,n.exports}var s={};return t.m=e,t.c=s,t.p="/",t(0)}([function(e,t,s){e.exports=s(1)},function(e,t,s){"use strict";var o=s(2),n=s(6),r=s(7),i=s(8),l=s(9),a=s(10),p=s(11),u=s(12),d=s(13),c=s(4),h=s(5),m=s(3),g=o.createClass({displayName:"Griddle",statics:{GridTable:n,GridFilter:r,GridPagination:i,GridSettings:l,GridRow:p},columnSettings:null,rowSettings:null,getDefaultProps:function(){return{columns:[],columnMetadata:[],rowMetadata:null,resultsPerPage:5,results:[],initialSort:"",initialSortAscending:!0,gridClassName:"",tableClassName:"",customRowComponentClassName:"",settingsText:"Settings",filterPlaceholderText:"Filter Results",nextText:"Next",previousText:"Previous",maxRowsText:"Rows per page",enableCustomFormatText:"Enable Custom Formatting",childrenColumnName:"children",metadataColumns:[],showFilter:!1,showSettings:!1,useCustomRowComponent:!1,useCustomGridComponent:!1,useCustomPagerComponent:!1,useGriddleStyles:!0,useGriddleIcons:!0,customRowComponent:null,customGridComponent:null,customPagerComponent:{},enableToggleCustom:!1,noDataMessage:"There is no data to display.",noDataClassName:"griddle-nodata",customNoDataComponent:null,showTableHeading:!0,showPager:!0,useFixedHeader:!1,useExternal:!1,externalSetPage:null,externalChangeSort:null,externalSetFilter:null,externalSetPageSize:null,externalMaxPage:null,externalCurrentPage:null,externalSortColumn:null,externalSortAscending:!0,externalLoadingComponent:null,externalIsLoading:!1,enableInfiniteScroll:!1,bodyHeight:null,paddingHeight:5,rowHeight:25,infiniteScrollLoadTreshold:50,useFixedLayout:!0,isSubGriddle:!1,enableSort:!0,onRowClick:null,sortAscendingClassName:"sort-ascending",sortDescendingClassName:"sort-descending",parentRowCollapsedClassName:"parent-row",parentRowExpandedClassName:"parent-row expanded",settingsToggleClassName:"settings",nextClassName:"griddle-next",previousClassName:"griddle-previous",headerStyles:{},sortAscendingComponent:" ▲",sortDescendingComponent:" ▼",parentRowCollapsedComponent:"▶",parentRowExpandedComponent:"▼",settingsIconComponent:"",nextIconComponent:"",previousIconComponent:"",isMultipleSelection:!1,selectedRowIds:[],uniqueIdentifier:"id"}},propTypes:{isMultipleSelection:o.PropTypes.bool,selectedRowIds:o.PropTypes.oneOfType([o.PropTypes.arrayOf(o.PropTypes.number),o.PropTypes.arrayOf(o.PropTypes.string)]),uniqueIdentifier:o.PropTypes.string},setFilter:function(e){if(this.props.useExternal)return void this.props.externalSetFilter(e);var t=this,s={page:0,filter:e};s.filteredResults=m.filter(this.props.results,function(t){for(var s=m.values(t),o=0;o<s.length;o++)if((s[o]||"").toString().toLowerCase().indexOf(e.toLowerCase())>=0)return!0;return!1}),s.maxPage=t.getMaxPage(s.filteredResults),(m.isUndefined(e)||m.isNull(e)||m.isEmpty(e))&&(s.filter=e,s.filteredResults=null),t.setState(s),this._resetSelectedRows()},setPageSize:function(e){return this.props.useExternal?void this.props.externalSetPageSize(e):(this.props.resultsPerPage=e,void this.setMaxPage())},toggleColumnChooser:function(){this.setState({showColumnChooser:!this.state.showColumnChooser})},toggleCustomComponent:function(){"grid"===this.state.customComponentType?this.setProps({useCustomGridComponent:!this.props.useCustomGridComponent}):"row"===this.state.customComponentType&&this.setProps({useCustomRowComponent:!this.props.useCustomRowComponent})},getMaxPage:function(e,t){if(this.props.useExternal)return this.props.externalMaxPage;t||(t=(e||this.getCurrentResults()).length);var s=Math.ceil(t/this.props.resultsPerPage);return s},setMaxPage:function(e){var t=this.getMaxPage(e);this.state.maxPage!==t&&this.setState({page:0,maxPage:t,filteredColumns:this.columnSettings.filteredColumns})},setPage:function(e){if(this.props.useExternal)return void this.props.externalSetPage(e);if(e*this.props.resultsPerPage<=this.props.resultsPerPage*this.state.maxPage){var t=this,s={page:e};t.setState(s)}this.props.enableInfiniteScroll?this.setState({isSelectAllChecked:!1}):this._resetSelectedRows()},setColumns:function(e){this.columnSettings.filteredColumns=m.isArray(e)?e:[e],this.setState({filteredColumns:this.columnSettings.filteredColumns})},nextPage:function(){var e=this.getCurrentPage();e<this.getCurrentMaxPage()-1&&this.setPage(e+1)},previousPage:function(){var e=this.getCurrentPage();e>0&&this.setPage(e-1)},changeSort:function(e){if(this.props.enableSort!==!1){if(this.props.useExternal)return void this.props.externalChangeSort(e,this.props.externalSortColumn===e?!this.props.externalSortAscending:!0);var t={page:0,sortColumn:e,sortAscending:!0};this.state.sortColumn==e&&(t.sortAscending=!this.state.sortAscending),this.setState(t),this._resetSelectedRows()}},componentWillReceiveProps:function(e){if(this.setMaxPage(e.results),e.columns!==this.columnSettings.filteredColumns&&(this.columnSettings.filteredColumns=e.columns),e.selectedRowIds){var t=this.getDataForRender(this.getCurrentResults(),this.columnSettings.getColumns(),!0);this.setState({isSelectAllChecked:this._getAreAllRowsChecked(e.selectedRowIds,m.pluck(t,this.props.uniqueIdentifier)),selectedRowIds:e.selectedRowIds})}},getInitialState:function(){var e={maxPage:0,page:0,filteredResults:null,filteredColumns:[],filter:"",sortColumn:this.props.initialSort,sortAscending:this.props.initialSortAscending,showColumnChooser:!1,isSelectAllChecked:!1,selectedRowIds:this.props.selectedRowIds};return e},componentWillMount:function(){this.verifyExternal(),this.verifyCustom(),this.columnSettings=new c(this.props.results.length>0?m.keys(this.props.results[0]):[],this.props.columns,this.props.childrenColumnName,this.props.columnMetadata,this.props.metadataColumns),this.rowSettings=new h(this.props.rowMetadata,this.props.useCustomTableRowComponent&&this.props.customTableRowComponent?this.props.customTableRowComponent:p,this.props.useCustomTableRowComponent),this.setMaxPage(),this.props.useCustomGridComponent===!0?this.setState({customComponentType:"grid"}):this.props.useCustomRowComponent===!0?this.setState({customComponentType:"row"}):this.setState({filteredColumns:this.columnSettings.filteredColumns})},verifyExternal:function(){this.props.useExternal===!0&&(null===this.props.externalSetPage&&console.error("useExternal is set to true but there is no externalSetPage function specified."),null===this.props.externalChangeSort&&console.error("useExternal is set to true but there is no externalChangeSort function specified."),null===this.props.externalSetFilter&&console.error("useExternal is set to true but there is no externalSetFilter function specified."),null===this.props.externalSetPageSize&&console.error("useExternal is set to true but there is no externalSetPageSize function specified."),null===this.props.externalMaxPage&&console.error("useExternal is set to true but externalMaxPage is not set."),null===this.props.externalCurrentPage&&console.error("useExternal is set to true but externalCurrentPage is not set. Griddle will not page correctly without that property when using external data."))},verifyCustom:function(){this.props.useCustomGridComponent===!0&&null===this.props.customGridComponent&&console.error("useCustomGridComponent is set to true but no custom component was specified."),this.props.useCustomRowComponent===!0&&null===this.props.customRowComponent&&console.error("useCustomRowComponent is set to true but no custom component was specified."),this.props.useCustomGridComponent===!0&&this.props.useCustomRowComponent===!0&&console.error("Cannot currently use both customGridComponent and customRowComponent.")},getDataForRender:function(e,t,s){var o=this;if(""!==this.state.sortColumn||""!==this.props.initialSort){var n=m.where(this.props.columnMetadata,{columnName:this.state.sortColumn});n=n.length>0&&n[0].hasOwnProperty("sortProperty")&&n[0].sortProperty||null,e=m.sortBy(e,function(e){return n?e[o.state.sortColumn||o.props.initialSort][n]:e[o.state.sortColumn||o.props.initialSort]}),this.state.sortAscending===!1&&e.reverse()}var r=this.getCurrentPage();if(!this.props.useExternal&&s&&this.props.resultsPerPage*(r+1)<=this.props.resultsPerPage*this.state.maxPage&&r>=0)if(this.isInfiniteScrollEnabled())e=m.first(e,(r+1)*this.props.resultsPerPage);else{var i=m.rest(e,r*this.props.resultsPerPage);e=m.initial(i,i.length-this.props.resultsPerPage)}for(var l=(this.columnSettings.getMetadataColumns,[]),a=0;a<e.length;a++){var p=e[a];"undefined"!=typeof p[o.props.childrenColumnName]&&p[o.props.childrenColumnName].length>0&&(p.children=o.getDataForRender(p[o.props.childrenColumnName],t,!1),"children"!==o.props.childrenColumnName&&delete p[o.props.childrenColumnName]),l.push(p)}return l},getCurrentResults:function(){return this.state.filteredResults||this.props.results},getCurrentPage:function(){return this.props.externalCurrentPage||this.state.page},getCurrentSort:function(){return this.props.useExternal?this.props.externalSortColumn:this.state.sortColumn},getCurrentSortAscending:function(){return this.props.useExternal?this.props.externalSortAscending:this.state.sortAscending},getCurrentMaxPage:function(){return this.props.useExternal?this.props.externalMaxPage:this.state.maxPage},getSortObject:function(){return{enableSort:this.props.enableSort,changeSort:this.changeSort,sortColumn:this.getCurrentSort(),sortAscending:this.getCurrentSortAscending(),sortAscendingClassName:this.props.sortAscendingClassName,sortDescendingClassName:this.props.sortDescendingClassName,sortAscendingComponent:this.props.sortAscendingComponent,sortDescendingComponent:this.props.sortDescendingComponent}},_toggleSelectAll:function(){var e=this.getDataForRender(this.getCurrentResults(),this.columnSettings.getColumns(),!0),t=!this.state.isSelectAllChecked,s=JSON.parse(JSON.stringify(this.state.selectedRowIds));m.each(e,function(e){this._updateSelectedRowIds(e[this.props.uniqueIdentifier],s,t)},this),this.setState({isSelectAllChecked:t,selectedRowIds:s})},_toggleSelectRow:function(e,t){var s=this.getDataForRender(this.getCurrentResults(),this.columnSettings.getColumns(),!0),o=JSON.parse(JSON.stringify(this.state.selectedRowIds));this._updateSelectedRowIds(e[this.props.uniqueIdentifier],o,t),this.setState({isSelectAllChecked:this._getAreAllRowsChecked(o,m.pluck(s,this.props.uniqueIdentifier)),selectedRowIds:o})},_updateSelectedRowIds:function(e,t,s){var o;s?(o=m.find(t,function(t){return e===t}),void 0===o&&t.push(e)):t.splice(t.indexOf(e),1)},_getIsSelectAllChecked:function(){return this.state.isSelectAllChecked},_getAreAllRowsChecked:function(e,t){var s,o;if(e.length!==t.length)return!1;for(s=0;s<e.length;s++)if(o=m.find(t,function(t){return e[s]===t}),void 0===o)return!1;return!0},_getIsRowChecked:function(e){return this.state.selectedRowIds.indexOf(e[this.props.uniqueIdentifier])>-1?!0:!1},getSelectedRowIds:function(){return this.state.selectedRowIds},_resetSelectedRows:function(){this.setState({isSelectAllChecked:!1,selectedRowIds:[]})},getMultipleSelectionObject:function(){return{isMultipleSelection:m.find(this.props.results,function(e){return"children"in e})?!1:this.props.isMultipleSelection,toggleSelectAll:this._toggleSelectAll,getIsSelectAllChecked:this._getIsSelectAllChecked,toggleSelectRow:this._toggleSelectRow,getSelectedRowIds:this.getSelectedRowIds,getIsRowChecked:this._getIsRowChecked}},isInfiniteScrollEnabled:function(){return this.props.useCustomPagerComponent?!1:this.props.enableInfiniteScroll},getClearFixStyles:function(){return{clear:"both",display:"table",width:"100%"}},getSettingsStyles:function(){return{"float":"left",width:"50%",textAlign:"right"}},getFilterStyles:function(){return{"float":"left",width:"50%",textAlign:"left",color:"#222",minHeight:"1px"}},getFilter:function(){return this.props.showFilter&&this.props.useCustomGridComponent===!1?o.createElement(r,{changeFilter:this.setFilter,placeholderText:this.props.filterPlaceholderText}):""},getSettings:function(){return this.props.showSettings?o.createElement("button",{type:"button",className:this.props.settingsToggleClassName,onClick:this.toggleColumnChooser,style:this.props.useGriddleStyles?{background:"none",border:"none",padding:0,margin:0,fontSize:14}:null},this.props.settingsText,this.props.settingsIconComponent):""},getTopSection:function(e,t){if(this.props.showFilter===!1&&this.props.showSettings===!1)return"";var s=null,n=null,r=null;return this.props.useGriddleStyles&&(s=this.getFilterStyles(),n=this.getSettingsStyles(),r=this.getClearFixStyles()),o.createElement("div",{className:"top-section",style:r},o.createElement("div",{className:"griddle-filter",style:s},e),o.createElement("div",{className:"griddle-settings-toggle",style:n},t))},getPagingSection:function(e,t){return(this.props.showPager&&!this.isInfiniteScrollEnabled()&&!this.props.useCustomGridComponent)===!1?"":o.createElement("div",{className:"griddle-footer"},this.props.useCustomPagerComponent?o.createElement(d,{next:this.nextPage,previous:this.previousPage,currentPage:e,maxPage:t,setPage:this.setPage,nextText:this.props.nextText,previousText:this.props.previousText,customPagerComponent:this.props.customPagerComponent}):o.createElement(i,{useGriddleStyles:this.props.useGriddleStyles,next:this.nextPage,previous:this.previousPage,nextClassName:this.props.nextClassName,nextIconComponent:this.props.nextIconComponent,previousClassName:this.props.previousClassName,previousIconComponent:this.props.previousIconComponent,currentPage:e,maxPage:t,setPage:this.setPage,nextText:this.props.nextText,previousText:this.props.previousText}))},getColumnSelectorSection:function(e,t){return this.state.showColumnChooser?o.createElement(l,{columns:e,selectedColumns:t,setColumns:this.setColumns,settingsText:this.props.settingsText,settingsIconComponent:this.props.settingsIconComponent,maxRowsText:this.props.maxRowsText,setPageSize:this.setPageSize,showSetPageSize:!this.props.useCustomGridComponent,resultsPerPage:this.props.resultsPerPage,enableToggleCustom:this.props.enableToggleCustom,toggleCustomComponent:this.toggleCustomComponent,useCustomComponent:this.props.useCustomRowComponent||this.props.useCustomGridComponent,useGriddleStyles:this.props.useGriddleStyles,enableCustomFormatText:this.props.enableCustomFormatText,columnMetadata:this.props.columnMetadata}):""},getCustomGridSection:function(){return o.createElement(this.props.customGridComponent,{data:this.props.results,className:this.props.customGridComponentClassName})},getCustomRowSection:function(e,t,s,n){return o.createElement("div",null,o.createElement(u,{data:e,columns:t,metadataColumns:s,className:this.props.customRowComponentClassName,customComponent:this.props.customRowComponent,style:this.getClearFixStyles()}),this.props.showPager&&n)},getStandardGridSection:function(e,t,s,r,i){var l=this.getSortObject(),a=this.getMultipleSelectionObject();return o.createElement("div",{className:"griddle-body"},o.createElement(n,{useGriddleStyles:this.props.useGriddleStyles,columnSettings:this.columnSettings,rowSettings:this.rowSettings,sortSettings:l,multipleSelectionSettings:a,isSubGriddle:this.props.isSubGriddle,useGriddleIcons:this.props.useGriddleIcons,useFixedLayout:this.props.useFixedLayout,showPager:this.props.showPager,pagingContent:r,data:e,className:this.props.tableClassName,enableInfiniteScroll:this.isInfiniteScrollEnabled(),nextPage:this.nextPage,showTableHeading:this.props.showTableHeading,useFixedHeader:this.props.useFixedHeader,parentRowCollapsedClassName:this.props.parentRowCollapsedClassName,parentRowExpandedClassName:this.props.parentRowExpandedClassName,parentRowCollapsedComponent:this.props.parentRowCollapsedComponent,parentRowExpandedComponent:this.props.parentRowExpandedComponent,bodyHeight:this.props.bodyHeight,paddingHeight:this.props.paddingHeight,rowHeight:this.props.rowHeight,infiniteScrollLoadTreshold:this.props.infiniteScrollLoadTreshold,externalLoadingComponent:this.props.externalLoadingComponent,externalIsLoading:this.props.externalIsLoading,hasMorePages:i,onRowClick:this.props.onRowClick}))},getContentSection:function(e,t,s,o,n){return this.props.useCustomGridComponent&&null!==this.props.customGridComponent?this.getCustomGridSection():this.props.useCustomRowComponent?this.getCustomRowSection(e,t,s,o):this.getStandardGridSection(e,t,s,o,n)},getNoDataSection:function(e,t){var s=null;return s=null!=this.props.customNoDataComponent?o.createElement("div",{className:e},o.createElement(this.props.customNoDataComponent,null)):o.createElement("div",{className:e},t,o.createElement(a,{noDataMessage:this.props.noDataMessage}))},shouldShowNoDataSection:function(e){return this.props.useExternal===!1&&("undefined"==typeof e||0===e.length)||this.props.useExternal===!0&&this.props.externalIsLoading===!1&&0===e.length},render:function(){var e=this.getCurrentResults(),t=(this.props.tableClassName+" table-header",this.getFilter()),s=this.getSettings(),n=this.getTopSection(t,s),r=[],i=this.columnSettings.getColumns(),l=this.getDataForRender(e,i,!0),a=this.columnSettings.getMetadataColumns();r=m.keys(m.omit(e[0],a)),r=this.columnSettings.orderColumns(r);var p=this.getCurrentPage(),u=this.getCurrentMaxPage(),d=u>p+1,c=this.getPagingSection(p,u),h=this.getContentSection(l,i,a,c,d),g=this.getColumnSelectorSection(r,i),C=this.props.gridClassName.length>0?"griddle "+this.props.gridClassName:"griddle";return C+=this.props.useCustomRowComponent?" griddle-custom":"",this.shouldShowNoDataSection(e)?(C+=this.props.noDataClassName&&this.props.noDataClassName.length>0?" "+this.props.noDataClassName:"",this.getNoDataSection(C,n)):o.createElement("div",{className:C},n,g,o.createElement("div",{className:"griddle-container",style:this.props.useGriddleStyles&&!this.props.isSubGriddle?{border:"1px solid #DDD"}:null},h))}});e.exports=g},function(t,s,o){t.exports=e},function(e,s,o){e.exports=t},function(e,t,s){"use strict";var o=function(e,t,s){t&&Object.defineProperties(e,t),s&&Object.defineProperties(e.prototype,s)},n=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},r=s(3),i=function(){function e(){var t=void 0===arguments[0]?[]:arguments[0],s=void 0===arguments[1]?[]:arguments[1],o=void 0===arguments[2]?"children":arguments[2],r=void 0===arguments[3]?[]:arguments[3],i=void 0===arguments[4]?[]:arguments[4];n(this,e),this.allColumns=t,this.filteredColumns=s,this.childrenColumnName=o,this.columnMetadata=r,this.metadataColumns=i}return o(e,null,{getMetadataColumns:{value:function(){var e=r.map(r.where(this.columnMetadata,{visible:!1}),function(e){return e.columnName});return e.indexOf(this.childrenColumnName)<0&&e.push(this.childrenColumnName),e.concat(this.metadataColumns)},writable:!0,configurable:!0},getVisibleColumnCount:{value:function(){return this.getColumns().length},writable:!0,configurable:!0},getColumnMetadataByName:{value:function(e){return r.findWhere(this.columnMetadata,{columnName:e})},writable:!0,configurable:!0},hasColumnMetadata:{value:function(){return null!==this.columnMetadata&&this.columnMetadata.length>0},writable:!0,configurable:!0},getMetadataColumnProperty:{value:function(e,t,s){var o=this.getColumnMetadataByName(e);return"undefined"==typeof o||null===o?s:o.hasOwnProperty(t)?o[t]:s},writable:!0,configurable:!0},orderColumns:{value:function(e){var t=this,s=100,o=r.sortBy(e,function(e){var o=r.findWhere(t.columnMetadata,{columnName:e});return"undefined"==typeof o||null===o||isNaN(o.order)?s:o.order});return o},writable:!0,configurable:!0},getColumns:{value:function(){var e=0===this.filteredColumns.length?this.allColumns:this.filteredColumns;return e=r.difference(e,this.metadataColumns),e=this.orderColumns(e)},writable:!0,configurable:!0}}),e}();e.exports=i},function(e,t,s){"use strict";var o=function(e,t,s){t&&Object.defineProperties(e,t),s&&Object.defineProperties(e.prototype,s)},n=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},r=s(3),i=function(){function e(){var t=void 0===arguments[0]?{}:arguments[0],s=void 0===arguments[1]?null:arguments[1],o=void 0===arguments[2]?!1:arguments[2];n(this,e),this.rowMetadata=t,this.rowComponent=s,this.isCustom=o}return o(e,null,{getRowKey:{value:function(e){var t;return t=this.hasRowMetadataKey()?e[this.rowMetadata.key]:r.uniqueId("grid_row")},writable:!0,configurable:!0},hasRowMetadataKey:{value:function(){return this.hasRowMetadata()&&null!==this.rowMetadata.key&&void 0!==this.rowMetadata.key},writable:!0,configurable:!0},getBodyRowMetadataClass:{value:function(e){return this.hasRowMetadata()&&null!==this.rowMetadata.bodyCssClassName&&void 0!==this.rowMetadata.bodyCssClassName?"function"==typeof this.rowMetadata.bodyCssClassName?this.rowMetadata.bodyCssClassName(e):this.rowMetadata.bodyCssClassName:null},writable:!0,configurable:!0},getHeaderRowMetadataClass:{value:function(){return this.hasRowMetadata()&&null!==this.rowMetadata.headerCssClassName&&void 0!==this.rowMetadata.headerCssClassName?this.rowMetadata.headerCssClassName:null},writable:!0,configurable:!0},hasRowMetadata:{value:function(){return null!==this.rowMetadata},writable:!0,configurable:!0}}),e}();e.exports=i},function(e,t,s){"use strict";var o=s(2),n=s(14),r=s(15),i=(s(4),s(5),s(3),o.createClass({displayName:"GridTable",getDefaultProps:function(){return{data:[],columnSettings:null,rowSettings:null,sortSettings:null,multipleSelectionSettings:null,className:"",enableInfiniteScroll:!1,nextPage:null,hasMorePages:!1,useFixedHeader:!1,useFixedLayout:!0,paddingHeight:null,rowHeight:null,infiniteScrollLoadTreshold:null,bodyHeight:null,tableHeading:"",useGriddleStyles:!0,useGriddleIcons:!0,isSubGriddle:!1,parentRowCollapsedClassName:"parent-row",parentRowExpandedClassName:"parent-row expanded",parentRowCollapsedComponent:"▶",parentRowExpandedComponent:"▼",externalLoadingComponent:null,externalIsLoading:!1,onRowClick:null}},getInitialState:function(){return{scrollTop:0,scrollHeight:this.props.bodyHeight,clientHeight:this.props.bodyHeight}},componentDidMount:function(){this.gridScroll()},componentDidUpdate:function(e,t){this.gridScroll()},gridScroll:function(){if(this.props.enableInfiniteScroll&&!this.props.externalIsLoading){var e=this.refs.scrollable.getDOMNode(),t=e.scrollTop,s=e.scrollHeight,o=e.clientHeight;if(null!==this.props.rowHeight&&this.state.scrollTop!==t&&Math.abs(this.state.scrollTop-t)>=this.getAdjustedRowHeight()){var n={scrollTop:t,scrollHeight:s,clientHeight:o};this.setState(n)}var r=s-(t+o)-this.props.infiniteScrollLoadTreshold,i=.6*r;i<=this.props.infiniteScrollLoadTreshold&&this.props.nextPage()}},verifyProps:function(){null===this.props.columnSettings&&console.error("gridTable: The columnSettings prop is null and it shouldn't be"),null===this.props.rowSettings&&console.error("gridTable: The rowSettings prop is null and it shouldn't be")},getAdjustedRowHeight:function(){return this.props.rowHeight+2*this.props.paddingHeight},getNodeContent:function(){this.verifyProps();var e=this,t=!1;if(!this.props.externalIsLoading||this.props.enableInfiniteScroll){var s=e.props.data,n=null,i=null;if(this.props.enableInfiniteScroll&&null!==this.props.rowHeight&&void 0!==this.refs.scrollable){var l=e.getAdjustedRowHeight(),a=Math.ceil(e.state.clientHeight/l),p=Math.max(0,Math.floor(e.state.scrollTop/l)-.25*a),u=Math.min(p+1.25*a,this.props.data.length-1);s=s.slice(p,u+1);var d={height:p*l+"px"};n=o.createElement("tr",{key:"above-"+d.height,style:d});var c={height:(this.props.data.length-u)*l+"px"};i=o.createElement("tr",{key:"below-"+c.height,style:c})}var h=s.map(function(s,n){var i="undefined"!=typeof s.children&&s.children.length>0,l=e.props.rowSettings.getRowKey(s);return i&&(t=i),o.createElement(r,{useGriddleStyles:e.props.useGriddleStyles,isSubGriddle:e.props.isSubGriddle,parentRowExpandedClassName:e.props.parentRowExpandedClassName,parentRowCollapsedClassName:e.props.parentRowCollapsedClassName,parentRowExpandedComponent:e.props.parentRowExpandedComponent,parentRowCollapsedComponent:e.props.parentRowCollapsedComponent,data:s,key:l+"-container",uniqueId:l,columnSettings:e.props.columnSettings,rowSettings:e.props.rowSettings,paddingHeight:e.props.paddingHeight,multipleSelectionSettings:e.props.multipleSelectionSettings,rowHeight:e.props.rowHeight,hasChildren:i,tableClassName:e.props.className,onRowClick:e.props.onRowClick})});return n&&h.unshift(n),i&&h.push(i),{nodes:h,anyHasChildren:t}}return null},render:function(){var e=[],t=!1,s=this.getNodeContent();s&&(e=s.nodes,t=s.anyHasChildren);var r=null,i=null,l={width:"100%"};if(this.props.useFixedLayout&&(l.tableLayout="fixed"),this.props.enableInfiniteScroll&&(r={position:"relative",overflowY:"scroll",height:this.props.bodyHeight+"px",width:"100%"}),this.props.externalIsLoading){var a=null,p=null;this.props.useGriddleStyles&&(a={textAlign:"center",paddingBottom:"40px"},p=this.props.columnSettings.getVisibleColumnCount());var u=this.props.externalLoadingComponent?o.createElement(this.props.externalLoadingComponent,null):o.createElement("div",null,"Loading...");i=o.createElement("tbody",null,o.createElement("tr",null,o.createElement("td",{style:a,colSpan:p},u)))}var d=this.props.showTableHeading?o.createElement(n,{useGriddleStyles:this.props.useGriddleStyles,useGriddleIcons:this.props.useGriddleIcons,sortSettings:this.props.sortSettings,multipleSelectionSettings:this.props.multipleSelectionSettings,columnSettings:this.props.columnSettings,rowSettings:this.props.rowSettings}):"";t||(e=o.createElement("tbody",null,e));var c="";if(this.props.showPager){var h=this.props.useGriddleStyles?{padding:"0",backgroundColor:"#EDEDED",border:"0",color:"#222"}:null;c=o.createElement("tbody",null,o.createElement("tr",null,o.createElement("td",{colSpan:this.props.multipleSelectionSettings.isMultipleSelection?this.props.columnSettings.getVisibleColumnCount()+1:this.props.columnSettings.getVisibleColumnCount(),style:h,className:"footer-container"},this.props.pagingContent)))}return this.props.useFixedHeader?(this.props.useGriddleStyles&&(l.tableLayout="fixed"),o.createElement("div",null,o.createElement("table",{className:this.props.className,style:this.props.useGriddleStyles&&l||null},d),o.createElement("div",{ref:"scrollable",onScroll:this.gridScroll,style:r},o.createElement("table",{className:this.props.className,style:this.props.useGriddleStyles&&l||null},e,i,c)))):o.createElement("div",{ref:"scrollable",onScroll:this.gridScroll,style:r},o.createElement("table",{className:this.props.className,style:this.props.useGriddleStyles&&l||null},d,e,i,c))}}));e.exports=i},function(e,t,s){"use strict";var o=s(2),n=o.createClass({displayName:"GridFilter",getDefaultProps:function(){return{placeholderText:""}},handleChange:function(e){this.props.changeFilter(e.target.value)},render:function(){return o.createElement("div",{className:"filter-container"},o.createElement("input",{type:"text",name:"filter",placeholder:this.props.placeholderText,className:"form-control",onChange:this.handleChange}))}});e.exports=n},function(e,t,s){"use strict";var o=s(2),n=s(3),r=o.createClass({displayName:"GridPagination",getDefaultProps:function(){return{maxPage:0,nextText:"",previousText:"",currentPage:0,useGriddleStyles:!0,nextClassName:"griddle-next",previousClassName:"griddle-previous",nextIconComponent:null,previousIconComponent:null}},pageChange:function(e){this.props.setPage(parseInt(e.target.value,10)-1)},render:function(){var e="",t="";this.props.currentPage>0&&(e=o.createElement("button",{type:"button",onClick:this.props.previous,style:this.props.useGriddleStyles?{color:"#222",border:"none",background:"none",margin:"0 0 0 10px"}:null},this.props.previousIconComponent,this.props.previousText)),this.props.currentPage!==this.props.maxPage-1&&(t=o.createElement("button",{type:"button",onClick:this.props.next,style:this.props.useGriddleStyles?{color:"#222",border:"none",background:"none",margin:"0 10px 0 0"}:null},this.props.nextText,this.props.nextIconComponent));var s=null,r=null,i=null;if(this.props.useGriddleStyles===!0){var l={"float":"left",minHeight:"1px",marginTop:"5px"};i=n.extend({textAlign:"right",width:"34%"},l),r=n.extend({textAlign:"center",width:"33%"},l),s=n.extend({width:"33%"},l)}for(var a=[],p=1;p<=this.props.maxPage;p++)a.push(o.createElement("option",{value:p,key:p},p));return o.createElement("div",{style:this.props.useGriddleStyles?{minHeight:"35px"}:null},o.createElement("div",{className:this.props.previousClassName,style:s},e),o.createElement("div",{className:"griddle-page",style:r},o.createElement("select",{value:this.props.currentPage+1,onChange:this.pageChange},a)," / ",this.props.maxPage),o.createElement("div",{className:this.props.nextClassName,style:i},t))}});e.exports=r},function(e,t,s){"use strict";var o=s(2),n=s(3),r=o.createClass({displayName:"GridSettings",getDefaultProps:function(){return{columns:[],columnMetadata:[],selectedColumns:[],settingsText:"",maxRowsText:"",resultsPerPage:0,enableToggleCustom:!1,useCustomComponent:!1,useGriddleStyles:!0,toggleCustomComponent:function(){}}},setPageSize:function(e){var t=parseInt(e.target.value,10);this.props.setPageSize(t)},handleChange:function(e){var t=e.target.dataset?e.target.dataset.name:e.target.getAttribute("data-name");e.target.checked===!0&&n.contains(this.props.selectedColumns,t)===!1?(this.props.selectedColumns.push(t),this.props.setColumns(this.props.selectedColumns)):this.props.setColumns(n.without(this.props.selectedColumns,t))},render:function(){var e=this,t=[];e.props.useCustomComponent===!1&&(t=this.props.columns.map(function(t,s){var r=n.contains(e.props.selectedColumns,t),i=n.findWhere(e.props.columnMetadata,{columnName:t}),l=t;return"undefined"!=typeof i&&"undefined"!=typeof i.displayName&&null!=i.displayName&&(l=i.displayName),"undefined"!=typeof i&&null!=i&&i.locked?o.createElement("div",{className:"column checkbox"},o.createElement("label",null,o.createElement("input",{type:"checkbox",disabled:!0,name:"check",checked:r,"data-name":t}),l)):"undefined"!=typeof i&&null!=i&&"undefined"!=typeof i.visible&&i.visible===!1?null:o.createElement("div",{className:"griddle-column-selection checkbox",key:t,style:e.props.useGriddleStyles?{"float":"left",width:"20%"}:null},o.createElement("label",null,o.createElement("input",{type:"checkbox",name:"check",onChange:e.handleChange,checked:r,"data-name":t}),l))}));var s=e.props.enableToggleCustom?o.createElement("div",{className:"form-group"},o.createElement("label",{htmlFor:"maxRows"},o.createElement("input",{type:"checkbox",checked:this.props.useCustomComponent,onChange:this.props.toggleCustomComponent})," ",this.props.enableCustomFormatText)):"",r=this.props.showSetPageSize?o.createElement("div",null,o.createElement("label",{htmlFor:"maxRows"},this.props.maxRowsText,":",o.createElement("select",{onChange:this.setPageSize,value:this.props.resultsPerPage},o.createElement("option",{value:"5"},"5"),o.createElement("option",{value:"10"},"10"),o.createElement("option",{value:"25"},"25"),o.createElement("option",{value:"50"},"50"),o.createElement("option",{value:"100"},"100")))):"";return o.createElement("div",{className:"griddle-settings",style:this.props.useGriddleStyles?{backgroundColor:"#FFF",border:"1px solid #DDD",color:"#222",padding:"10px",marginBottom:"10px"}:null},o.createElement("h6",null,this.props.settingsText),o.createElement("div",{className:"griddle-columns",style:this.props.useGriddleStyles?{clear:"both",display:"table",width:"100%",borderBottom:"1px solid #EDEDED",marginBottom:"10px"}:null},t),r,s)}});e.exports=r},function(e,t,s){"use strict";var o=s(2),n=o.createClass({displayName:"GridNoData",getDefaultProps:function(){return{noDataMessage:"No Data"}},render:function(){return o.createElement("div",{
className:"no-data-display-container"},o.createElement("div",{className:"no-results-text-container"},o.createElement("span",null,"No Results.")),o.createElement("div",{className:"take-survey-text"},o.createElement("span",null,"Do you represent an organization that uses open data? Take our survey to be displayed on the map: "),o.createElement("a",{href:"http://opendataenterprise.org/map/survey",target:"_black"},"Take our survey.")),o.createElement("div",{className:"suggest-survey-text"},o.createElement("span",null,"To suggest an organization using open data or contribute examples: "),o.createElement("a",{href:"mailto:map@odenterprise.org"},"Send us an email.")))}});e.exports=n},function(e,t,s){"use strict";var o=s(2),n=s(3),r=(s(4),o.createClass({displayName:"GridRow",getDefaultProps:function(){return{isChildRow:!1,showChildren:!1,data:{},columnSettings:null,rowSettings:null,hasChildren:!1,useGriddleStyles:!0,useGriddleIcons:!0,isSubGriddle:!1,paddingHeight:null,rowHeight:null,parentRowCollapsedClassName:"parent-row",parentRowExpandedClassName:"parent-row expanded",parentRowCollapsedComponent:"▶",parentRowExpandedComponent:"▼",onRowClick:null,multipleSelectionSettings:null}},handleClick:function(e){null!==this.props.onRowClick&&n.isFunction(this.props.onRowClick)?this.props.onRowClick(this,e):this.props.hasChildren&&this.props.toggleChildren()},handleSelectClick:function(e){this.props.multipleSelectionSettings.isMultipleSelection&&("checkbox"===e.target.type?this.props.multipleSelectionSettings.toggleSelectRow(this.props.data,this.refs.selected.getDOMNode().checked):this.props.multipleSelectionSettings.toggleSelectRow(this.props.data,!o.findDOMNode(this.refs.selected).checked))},verifyProps:function(){null===this.props.columnSettings&&console.error("gridRow: The columnSettings prop is null and it shouldn't be")},render:function(){var e=this;this.verifyProps();var t=this,s=null;this.props.useGriddleStyles&&(s={margin:"0",padding:t.props.paddingHeight+"px 5px "+t.props.paddingHeight+"px 5px",height:t.props.rowHeight?this.props.rowHeight-2*t.props.paddingHeight+"px":null,backgroundColor:"#FFF",borderTopColor:"#DDD",color:"#222"});var r=this.props.columnSettings.getColumns(),i=n.object(r,[]),l=Object.create(this.props.data);n.defaults(l,i);var a=n.pairs(n.pick(l,r)),p=a.map(function(t,r){var i=null,a=e.props.columnSettings.getColumnMetadataByName(t[0]),p=0===r&&e.props.hasChildren&&e.props.showChildren===!1&&e.props.useGriddleIcons?o.createElement("span",{style:e.props.useGriddleStyles?{fontSize:"10px",marginRight:"5px"}:null},e.props.parentRowCollapsedComponent):0===r&&e.props.hasChildren&&e.props.showChildren&&e.props.useGriddleIcons?o.createElement("span",{style:e.props.useGriddleStyles?{fontSize:"10px"}:null},e.props.parentRowExpandedComponent):"";if(0===r&&e.props.isChildRow&&e.props.useGriddleStyles&&(s=n.extend(s,{paddingLeft:10})),e.props.columnSettings.hasColumnMetadata()&&"undefined"!=typeof a){var u="undefined"==typeof a.customComponent||null===a.customComponent?t[1]:o.createElement(a.customComponent,{data:t[1],rowData:l,metadata:a});i=null==a?i:o.createElement("td",{onClick:e.handleClick,className:a.cssClassName,key:r,style:s},u)}return i||o.createElement("td",{onClick:e.handleClick,key:r,style:s},p,t[1])});if(p&&this.props.multipleSelectionSettings&&this.props.multipleSelectionSettings.isMultipleSelection){this.props.multipleSelectionSettings.getSelectedRowIds();p.unshift(o.createElement("td",{style:s},o.createElement("input",{type:"checkbox",checked:this.props.multipleSelectionSettings.getIsRowChecked(l),ref:"selected"})))}var u=t.props.rowSettings&&t.props.rowSettings.getBodyRowMetadataClass(t.props.data)||"standard-row";return t.props.isChildRow?u="child-row":t.props.hasChildren&&(u=t.props.showChildren?this.props.parentRowExpandedClassName:this.props.parentRowCollapsedClassName),o.createElement("tr",{onClick:this.props.multipleSelectionSettings&&this.props.multipleSelectionSettings.isMultipleSelection?this.handleSelectClick:null,className:u},p)}}));e.exports=r},function(e,t,s){"use strict";var o=s(2),n=o.createClass({displayName:"CustomRowComponentContainer",getDefaultProps:function(){return{data:[],metadataColumns:[],className:"",customComponent:{}}},render:function(){var e=this;if("function"!=typeof e.props.customComponent)return console.log("Couldn't find valid template."),o.createElement("div",{className:this.props.className});var t=this.props.data.map(function(t,s){return o.createElement(e.props.customComponent,{data:t,metadataColumns:e.props.metadataColumns,key:s})});this.props.showPager&&this.props.pagingContent;return o.createElement("div",{className:this.props.className,style:this.props.style},t)}});e.exports=n},function(e,t,s){"use strict";var o=s(2),n=o.createClass({displayName:"CustomPaginationContainer",getDefaultProps:function(){return{maxPage:0,nextText:"",previousText:"",currentPage:0,customPagerComponent:{}}},render:function(){var e=this;return"function"!=typeof e.props.customPagerComponent?(console.log("Couldn't find valid template."),o.createElement("div",null)):o.createElement(e.props.customPagerComponent,{maxPage:this.props.maxPage,nextText:this.props.nextText,previousText:this.props.previousText,currentPage:this.props.currentPage,setPage:this.props.setPage,previous:this.props.previous,next:this.props.next})}});e.exports=n},function(e,t,s){"use strict";var o=s(2),n=(s(3),s(4),o.createClass({displayName:"GridTitle",getDefaultProps:function(){return{columnSettings:null,rowSettings:null,sortSettings:null,multipleSelectionSettings:null,headerStyle:null,useGriddleStyles:!0,useGriddleIcons:!0,headerStyles:{}}},componentWillMount:function(){this.verifyProps()},sort:function(e){this.props.sortSettings.changeSort(e.target.dataset.title||e.target.parentElement.dataset.title)},toggleSelectAll:function(e){this.props.multipleSelectionSettings.toggleSelectAll()},verifyProps:function(){null===this.props.columnSettings&&console.error("gridTitle: The columnSettings prop is null and it shouldn't be"),null===this.props.sortSettings&&console.error("gridTitle: The sortSettings prop is null and it shouldn't be")},render:function(){this.verifyProps();var e=this,t=null,s=this.props.columnSettings.getColumns().map(function(s,n){var r="",i=null;e.props.sortSettings.sortColumn==s&&e.props.sortSettings.sortAscending?(r=e.props.sortSettings.sortAscendingClassName,i=e.props.useGriddleIcons&&e.props.sortSettings.sortAscendingComponent):e.props.sortSettings.sortColumn==s&&e.props.sortSettings.sortAscending===!1&&(r+=e.props.sortSettings.sortDescendingClassName,i=e.props.useGriddleIcons&&e.props.sortSettings.sortDescendingComponent);var l=e.props.columnSettings.getColumnMetadataByName(s),a=e.props.columnSettings.getMetadataColumnProperty(s,"sortable",!0),p=e.props.columnSettings.getMetadataColumnProperty(s,"displayName",s);return r=null==l?r:(r&&r+" "||r)+e.props.columnSettings.getMetadataColumnProperty(s,"cssClassName",""),e.props.useGriddleStyles&&(t={backgroundColor:"#EDEDEF",border:"0",borderBottom:"1px solid #DDD",color:"#222",padding:"5px",cursor:a?"pointer":"default"}),o.createElement("th",{onClick:a?e.sort:null,"data-title":s,className:r,key:p,style:t},p,i)});s&&this.props.multipleSelectionSettings.isMultipleSelection&&s.unshift(o.createElement("th",{onClick:this.toggleSelectAll,style:t},o.createElement("input",{type:"checkbox",checked:this.props.multipleSelectionSettings.getIsSelectAllChecked()})));var n=e.props.rowSettings&&e.props.rowSettings.getHeaderRowMetadataClass()||null;return o.createElement("thead",null,o.createElement("tr",{className:n,style:this.props.headerStyles},s))}}));e.exports=n},function(e,t,s){"use strict";var o=s(2),n=(s(4),o.createClass({displayName:"GridRowContainer",getDefaultProps:function(){return{useGriddleStyles:!0,useGriddleIcons:!0,isSubGriddle:!1,columnSettings:null,rowSettings:null,paddingHeight:null,rowHeight:null,parentRowCollapsedClassName:"parent-row",parentRowExpandedClassName:"parent-row expanded",parentRowCollapsedComponent:"▶",parentRowExpandedComponent:"▼",onRowClick:null,multipleSelectionSettings:null}},getInitialState:function(){return{data:{},showChildren:!1}},componentWillReceiveProps:function(){this.setShowChildren(!1)},toggleChildren:function(){this.setShowChildren(this.state.showChildren===!1)},setShowChildren:function(e){this.setState({showChildren:e})},verifyProps:function(){null===this.props.columnSettings&&console.error("gridRowContainer: The columnSettings prop is null and it shouldn't be")},render:function(){this.verifyProps();var e=this;if("undefined"==typeof this.props.data)return o.createElement("tbody",null);var t=[],n=this.props.columnSettings.getColumns();t.push(o.createElement(this.props.rowSettings.rowComponent,{useGriddleStyles:this.props.useGriddleStyles,isSubGriddle:this.props.isSubGriddle,data:this.props.rowSettings.isCustom?_.pick(this.props.data,n):this.props.data,rowData:this.props.rowSettings.isCustom?this.props.data:null,columnSettings:this.props.columnSettings,rowSettings:this.props.rowSettings,hasChildren:e.props.hasChildren,toggleChildren:e.toggleChildren,showChildren:e.state.showChildren,key:e.props.uniqueId,useGriddleIcons:e.props.useGriddleIcons,parentRowExpandedClassName:this.props.parentRowExpandedClassName,parentRowCollapsedClassName:this.props.parentRowCollapsedClassName,parentRowExpandedComponent:this.props.parentRowExpandedComponent,parentRowCollapsedComponent:this.props.parentRowCollapsedComponent,paddingHeight:e.props.paddingHeight,rowHeight:e.props.rowHeight,onRowClick:e.props.onRowClick,multipleSelectionSettings:this.props.multipleSelectionSettings}));var r=null;return e.state.showChildren&&(r=e.props.hasChildren&&this.props.data.children.map(function(t,n){if("undefined"!=typeof t.children){var r=s(1);return o.createElement("tr",{style:{paddingLeft:5}},o.createElement("td",{colSpan:e.props.columnSettings.getVisibleColumnCount(),className:"griddle-parent",style:e.props.useGriddleStyles?{border:"none",padding:"0 0 0 5px"}:null},o.createElement(r,{isSubGriddle:!0,results:[t],columns:e.props.columnSettings.getColumns(),tableClassName:e.props.tableClassName,parentRowExpandedClassName:e.props.parentRowExpandedClassName,parentRowCollapsedClassName:e.props.parentRowCollapsedClassName,showTableHeading:!1,showPager:!1,columnMetadata:e.props.columnMetadata,parentRowExpandedComponent:e.props.parentRowExpandedComponent,parentRowCollapsedComponent:e.props.parentRowCollapsedComponent,paddingHeight:e.props.paddingHeight,rowHeight:e.props.rowHeight})))}return o.createElement(e.props.rowSettings.rowComponent,{useGriddleStyles:e.props.useGriddleStyles,isSubGriddle:e.props.isSubGriddle,data:t,columnSettings:e.props.columnSettings,isChildRow:!0,columnMetadata:e.props.columnMetadata,key:e.props.rowSettings.getRowKey(t)})})),e.props.hasChildren===!1?t[0]:o.createElement("tbody",null,e.state.showChildren?t.concat(r):t)}}));e.exports=n}])});